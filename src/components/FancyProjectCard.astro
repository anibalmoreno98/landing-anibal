---
const { title, date, description, github, demo } = Astro.props;
---

<div class="card-3d">
  <div class="spotlight"></div>

  <div class="content">
    <h3>{title}</h3>
    <p class="date">{date}</p>
    <p>{description}</p>

    <div class="buttons">
      <a href={github} target="_blank">GitHub</a>
      <a href={demo} target="_blank">Ver demo</a>
    </div>
  </div>
</div>

<style>
.card-3d {
  position: relative;
  padding: 2rem;
  border-radius: 18px;
  background: radial-gradient(circle at top left, #20253a, #0c0f1a);
  border: 1px solid rgba(120, 180, 255, 0.25);
  box-shadow:
    0 0 0 1px rgba(0, 80, 200, 0.35),
    0 18px 45px rgba(0, 0, 0, 0.7);
  transform-style: preserve-3d;
  overflow: hidden;
  cursor: pointer;
  transition:
    transform .18s ease-out,
    box-shadow .18s ease-out,
    border-color .18s ease-out;
}

/* Glow general */
.card-3d::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(circle at 0% 0%, rgba(0, 150, 255, 0.25), transparent 55%),
    radial-gradient(circle at 100% 100%, rgba(150, 50, 255, 0.25), transparent 55%);
  opacity: 0.4;
  pointer-events: none;
}

/* Spotlight din√°mico */
.spotlight {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at var(--mx) var(--my),
    rgba(0, 200, 255, 0.35),
    transparent 60%
  );
  mix-blend-mode: screen;
  opacity: 0;
  transition: opacity .18s ease-out;
  pointer-events: none;
}

/* Contenido */
.content {
  position: relative;
  z-index: 2;
}

.card-3d h3 {
  color: #f5f7ff;
  font-size: 1.3rem;
  margin-bottom: 0.4rem;
}

.card-3d .date {
  color: #9aa3c2;
  font-size: 0.8rem;
  margin-bottom: 1rem;
}

.card-3d p {
  color: #d5daee;
  margin-bottom: 1.2rem;
  font-size: 0.9rem;
}

/* Botones */
.buttons {
  display: flex;
  gap: 1rem;
}

.buttons a {
  background: linear-gradient(135deg, #0f7bff, #7b3dff);
  color: white;
  padding: 0.6rem 1.2rem;
  border-radius: 999px;
  text-decoration: none;
  font-size: 0.85rem;
  font-weight: 600;
  transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
  box-shadow: 0 8px 20px rgba(0, 120, 255, 0.4);
}

.buttons a:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px rgba(0, 120, 255, 0.6);
  filter: brightness(1.05);
}

/* Hover global */
.card-3d:hover {
  box-shadow:
    0 0 0 1px rgba(0, 180, 255, 0.6),
    0 22px 55px rgba(0, 0, 0, 0.85);
  border-color: rgba(160, 210, 255, 0.8);
}

.card-3d:hover .spotlight {
  opacity: 1;
}
</style>

<script>
const cards = document.querySelectorAll(".card-3d");

cards.forEach(card => {
  const spotlight = card.querySelector(".spotlight");

  card.addEventListener("mousemove", (e) => {
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;

    // Spotlight
    spotlight.style.setProperty("--mx", x + "px");
    spotlight.style.setProperty("--my", y + "px");

    // Tilt 3D
    const rx = (y - rect.height / 2) / 18;
    const ry = (x - rect.width / 2) / 18;

    card.style.transform = `rotateX(${-rx}deg) rotateY(${ry}deg) translateZ(0)`;
  });

  card.addEventListener("mouseleave", () => {
    card.style.transform = "rotateX(0) rotateY(0) translateZ(0)";
  });
});
</script>
